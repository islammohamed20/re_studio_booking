# ๐ฐ ุชุญุฏูุซ ุญุณุงุจ ุงููุจูุบ ุงูุฅุฌูุงูู ูู Package Service Item

## ๐ฏ ุงููุชุทูุจ

ุชุญุฏูุซ ุญุณุงุจ **ุงููุจูุบ ุงูุฅุฌูุงูู** (`total_amount`) ูู `Package Service Item` ููุนุชูุฏ ุนูู **ููุน ุงููุญุฏุฉ**:

### ุงูุญุงูุชุงู:

#### 1๏ธโฃ ููุน ุงููุญุฏุฉ = **"ูุฏุฉ"** (ุฎุฏูุงุช ุฒูููุฉ)
```
ุงููุจูุบ ุงูุฅุฌูุงูู = ุณุนุฑ ุงูุณุงุนุฉ ุจุงูุจุงูุฉ ร ุนุฏุฏ ุงูุณุงุนุงุช
total_amount = package_price ร quantity
```

**ูุซุงู:**
- ุฎุฏูุฉ: Full Location
- ููุน ุงููุญุฏุฉ: ูุฏุฉ
- ุณุนุฑ ุงูุณุงุนุฉ ุจุงูุจุงูุฉ: 450 ุฑูุงู
- ุนุฏุฏ ุงูุณุงุนุงุช: 3
- **ุงููุจูุบ ุงูุฅุฌูุงูู = 450 ร 3 = 1,350 ุฑูุงู** โ

---

#### 2๏ธโฃ ููุน ุงููุญุฏุฉ = **"ูููุฉ"** (ุฎุฏูุงุช ูููุฉ)
```
ุงููุจูุบ ุงูุฅุฌูุงูู = ุณุนุฑ ุงููููุฉ ร ุงููููุฉ
total_amount = qty_price ร qty
```

**ูุซุงู:**
- ุฎุฏูุฉ: Reels
- ููุน ุงููุญุฏุฉ: ูููุฉ
- ุณุนุฑ ุงููููุฉ: 50 ุฑูุงู (ููู ุฑูู)
- ุงููููุฉ: 10 ุฑููุฒ
- **ุงููุจูุบ ุงูุฅุฌูุงูู = 50 ร 10 = 500 ุฑูุงู** โ

---

## โ ุงูุชุนุฏููุงุช ุงููุทุจูุฉ

### ูู `package_service_item.py`:

#### 1๏ธโฃ ุชุญุฏูุซ `calculate_total_amount()`

**ูุจู ุงูุชุนุฏูู:**
```python
def calculate_total_amount(self):
    """Calculate total amount based on package price and quantity"""
    self.total_amount = flt(self.package_price) * flt(self.quantity or 1)
```

**ุจุนุฏ ุงูุชุนุฏูู:**
```python
def calculate_total_amount(self):
    """
    Calculate total amount based on unit type:
    - If unit_type = 'ูุฏุฉ' (Duration): total = package_price ร quantity (hours)
    - If unit_type = 'ูููุฉ' (Quantity): total = qty_price ร qty
    """
    if self.unit_type == 'ูุฏุฉ':
        # ููุฎุฏูุงุช ุงูุฒูููุฉ: ุณุนุฑ ุงูุณุงุนุฉ ร ุนุฏุฏ ุงูุณุงุนุงุช
        self.total_amount = flt(self.package_price) * flt(self.quantity or 1)
    elif self.unit_type == 'ูููุฉ':
        # ููุฎุฏูุงุช ุงููููุฉ: ุณุนุฑ ุงููููุฉ ร ุงููููุฉ
        self.total_amount = flt(self.qty_price) * flt(self.qty or 1)
    else:
        # fallback: ุงุณุชุฎุฏุงู package_price ร quantity
        self.total_amount = flt(self.package_price) * flt(self.quantity or 1)
```

---

#### 2๏ธโฃ ุชุญุฏูุซ `fetch_service_details()`

ุชู ุฅุถุงูุฉ ููุทู ูุชุญุฏูุฏ `unit_type` ุชููุงุฆูุงู ุจูุงุกู ุนูู `Service.type_unit`:

```python
def fetch_service_details(self):
    """Fetch service details when service is selected"""
    if self.service:
        service_doc = frappe.get_doc("Service", self.service)
        
        # ุฌูุจ ุงุณู ุงูุฎุฏูุฉ
        if not self.service_name:
            self.service_name = service_doc.service_name_en
        
        # ุชุญุฏูุฏ ููุน ุงููุญุฏุฉ ุจูุงุกู ุนูู Service
        if service_doc.type_unit:
            if service_doc.type_unit == 'ูุฏุฉ':
                self.unit_type = 'ูุฏุฉ'
            else:
                # ุฃู ููุน ุขุฎุฑ (Reels, Photo, etc.) ูุนุชุจุฑ ูููุฉ
                self.unit_type = 'ูููุฉ'
        
        # ุชุนููู ุงูุฃุณุนุงุฑ ุงูุงูุชุฑุงุถูุฉ
        if not self.base_price:
            self.base_price = service_doc.price
        if not self.package_price:
            self.package_price = service_doc.price
```

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุฎุฏูุฉ ุฒูููุฉ (Full Location)

```
ููุน ุงููุญุฏุฉ: ูุฏุฉ โฑ๏ธ
ุนุฏุฏ ุงูุณุงุนุงุช: 4
ุณุนุฑ ุงูุณุงุนุฉ ุจุงูุจุงูุฉ: 400 ุฑูุงู
ุงููุจูุบ ุงูุฅุฌูุงูู = 400 ร 4 = 1,600 ุฑูุงู โ
```

---

### ูุซุงู 2: ุฎุฏูุฉ ูููุฉ (Reels)

```
ููุน ุงููุญุฏุฉ: ูููุฉ ๐ฆ
ุงููููุฉ: 15 ุฑูู
ุณุนุฑ ุงููููุฉ: 40 ุฑูุงู/ุฑูู
ุงููุจูุบ ุงูุฅุฌูุงูู = 40 ร 15 = 600 ุฑูุงู โ
```

---

### ูุซุงู 3: ุฎุฏูุฉ ูููุฉ (Photo)

```
ููุน ุงููุญุฏุฉ: ูููุฉ ๐ธ
ุงููููุฉ: 100 ุตูุฑุฉ
ุณุนุฑ ุงููููุฉ: 5 ุฑูุงู/ุตูุฑุฉ
ุงููุจูุบ ุงูุฅุฌูุงูู = 5 ร 100 = 500 ุฑูุงู โ
```

---

## ๐ ุงูุชุฏูู ุงููุงูู

```
ุฅุถุงูุฉ ุฎุฏูุฉ ุฅูู Package Service Item
    โ
ุฌูุจ ุชูุงุตูู ุงูุฎุฏูุฉ (fetch_service_details)
    โ
ุชุญุฏูุฏ unit_type ุจูุงุกู ุนูู Service.type_unit
    โ
ูู unit_type = "ูุฏุฉ"ุ
    โ
ูุนู โ total_amount = package_price ร quantity
    โ
ูุง (unit_type = "ูููุฉ") โ total_amount = qty_price ร qty
    โ
ุญูุธ ุงููุจูุบ ุงูุฅุฌูุงูู โ
```

---

## ๐ ุงูุญููู ุงููุณุชุฎุฏูุฉ

### ููุฎุฏูุงุช ุงูุฒูููุฉ (ูุฏุฉ):
- `unit_type` = "ูุฏุฉ"
- `quantity` - ุนุฏุฏ ุงูุณุงุนุงุช
- `package_price` - ุณุนุฑ ุงูุณุงุนุฉ ุจุงูุจุงูุฉ
- `total_amount` = `package_price ร quantity`

### ููุฎุฏูุงุช ุงููููุฉ:
- `unit_type` = "ูููุฉ"
- `qty` - ุงููููุฉ (ุนุฏุฏ ุงูุฑููุฒุ ุงูุตูุฑุ ุฅูุฎ)
- `qty_price` - ุณุนุฑ ุงููููุฉ ุงููุงุญุฏุฉ
- `total_amount` = `qty_price ร qty`

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:

#### ุงุฎุชุจุงุฑ 1: ุฎุฏูุฉ ุฒูููุฉ
1. ุงูุชุญ **Package**
2. ุฃุถู ุฎุฏูุฉ ูู `Package Service Item`
3. ุงุฎุชุฑ ุฎุฏูุฉ ููุนูุง **"ูุฏุฉ"** (ูุซู Full Location)
4. โ ุชุญูู ูู `unit_type = ูุฏุฉ`
5. ุฃุฏุฎู `quantity = 3` (ุนุฏุฏ ุงูุณุงุนุงุช)
6. ุฃุฏุฎู `package_price = 450`
7. โ ุชุญูู ูู `total_amount = 1,350` (450 ร 3)

#### ุงุฎุชุจุงุฑ 2: ุฎุฏูุฉ ูููุฉ
1. ุฃุถู ุฎุฏูุฉ ุฃุฎุฑู
2. ุงุฎุชุฑ ุฎุฏูุฉ ููุนูุง **"Reels"** ุฃู **"Photo"**
3. โ ุชุญูู ูู `unit_type = ูููุฉ`
4. ุฃุฏุฎู `qty = 10` (ุนุฏุฏ ุงูุฑููุฒ)
5. ุฃุฏุฎู `qty_price = 50`
6. โ ุชุญูู ูู `total_amount = 500` (50 ร 10)

---

## ๐จ ุนุฑุถ ุงูุญููู ูู ุงููุงุฌูุฉ

### ุนูุฏ ุงุฎุชูุงุฑ unit_type = "ูุฏุฉ":
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุฎุฏูุฉ: Full Location                  โ
โ ููุน ุงููุญุฏุฉ: ูุฏุฉ โฑ๏ธ                     โ
โ                                         โ
โ ุนุฏุฏ ุงูุณุงุนุงุช: 3                         โ
โ ุณุนุฑ ุงูุณุงุนุฉ ุจุงูุจุงูุฉ: 450 ุฑูุงู           โ
โ                                         โ
โ ุงููุจูุบ ุงูุฅุฌูุงูู: 1,350 ุฑูุงู โ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุนูุฏ ุงุฎุชูุงุฑ unit_type = "ูููุฉ":
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุฎุฏูุฉ: Reels Service                  โ
โ ููุน ุงููุญุฏุฉ: ูููุฉ ๐ฆ                    โ
โ                                         โ
โ ุงููููุฉ: 10 ุฑูู                         โ
โ ุณุนุฑ ุงููููุฉ: 50 ุฑูุงู/ุฑูู                โ
โ                                         โ
โ ุงููุจูุบ ุงูุฅุฌูุงูู: 500 ุฑูุงู โ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุฌุฏูู ููุงุฑูุฉ ุดุงูู

| ุงูุฎุฏูุฉ | ููุน ุงููุญุฏุฉ | ุงููููุฉ/ุงูุณุงุนุงุช | ุงูุณุนุฑ | ุงููุจูุบ ุงูุฅุฌูุงูู | ุงูุตูุบุฉ |
|--------|------------|----------------|-------|-----------------|--------|
| Full Location | ูุฏุฉ | 3 ุณุงุนุงุช | 450 ุฑูุงู/ุณุงุนุฉ | 1,350 | 450 ร 3 |
| Half Location | ูุฏุฉ | 2 ุณุงุนุงุช | 300 ุฑูุงู/ุณุงุนุฉ | 600 | 300 ร 2 |
| Reels | ูููุฉ | 10 ุฑูู | 50 ุฑูุงู/ุฑูู | 500 | 50 ร 10 |
| Photo | ูููุฉ | 100 ุตูุฑุฉ | 5 ุฑูุงู/ุตูุฑุฉ | 500 | 5 ร 100 |
| Promo | ูููุฉ | 3 ููุฏูู | 200 ุฑูุงู/ููุฏูู | 600 | 200 ร 3 |

---

## โ ุงูููุงุฆุฏ

1. **ุฏูุฉ ุงูุญุณุงุจุงุช** โ
   - ุญุณุงุจ ุตุญูุญ ุจูุงุกู ุนูู ููุน ุงูุฎุฏูุฉ

2. **ูุฑููุฉ ุงูุชุณุนูุฑ** โ
   - ุฎุฏูุงุช ุฒูููุฉ: ุณุนุฑ ุจุงูุณุงุนุฉ
   - ุฎุฏูุงุช ูููุฉ: ุณุนุฑ ุจุงููุญุฏุฉ

3. **ูุถูุญ ููุนููู** โ
   - ูุนุฑู ุจุงูุถุจุท ููู ูุชู ุญุณุงุจ ุงููุจูุบ

4. **ุณูููุฉ ุงูุฅุฏุงุฑุฉ** โ
   - ุญููู ูุงุถุญุฉ ุญุณุจ ููุน ุงูุฎุฏูุฉ

---

## ๐ฏ ููุฎุต ุงูุชุบููุฑุงุช

### ููู ูุงุญุฏ ูุนุฏู:
- **`package_service_item.py`**

### ุฏุงูุชุงู ูุญุฏุซุชุงู:
1. **`calculate_total_amount()`** - ููุทู ุงูุญุณุงุจ ุงูุฌุฏูุฏ
2. **`fetch_service_details()`** - ุชุญุฏูุฏ unit_type ุชููุงุฆูุงู

### ุงูููุทู:
```python
if unit_type == 'ูุฏุฉ':
    total_amount = package_price ร quantity
elif unit_type == 'ูููุฉ':
    total_amount = qty_price ร qty
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ูุณุญ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ: `bench clear-cache`
2. โ ุฅุนุงุฏุฉ ุชุดุบูู ุงููุธุงู: `bench restart`
3. ๐งช ุงุฎุชุจุงุฑ ูู ุงููุงุฌูุฉ
4. ๐ ุชูุซูู ุงูุงุฎุชุจุงุฑุงุช

---

ุชู ุงูุชุทุจูู ุจูุฌุงุญ! ๐

ุชุงุฑูุฎ ุงูุชุทุจูู: 18 ุฃูุชูุจุฑ 2025
